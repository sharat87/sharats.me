{% extends 'base.html' %}

{% block main %}
	<h1><a href='{{ post.permalink }}' rel=bookmark>{{ post.title | safe }}</a></h1>

	{% if post.date or post.tags %}
	<span class=title-subtext>
		{% if post.date %}
		<time datetime='{{ post.date_iso }}'>{{ post.date_display }}</time>
		{% endif %}
		{% for tag in post.tags %}
		<a href='/tags/{{ tag }}/' title='Posts tagged with #{{ tag }}'>{{ tag }}</a>
		{% endfor %}
	</span>
	{% endif %}

	<article> {{ post.html_body | safe }} </article>

	{% if config.dev_mode %}
	<section class=post-author>
		<h2>About the author</h2>
		<p>Hello! I am Shrikant! I love programming and quantitative financial topics. I mostly
		write about Python, JavaScript and ViM following my work and experiences. Thank you for
		checking out my blog! <a href='/contact/'>Say hello!</a></p>
		<p class=support-links>Support my work &rarr; <a
		   href='https://www.buymeacoffee.com/sharat87' target=_blank title='No signup
		   required'><img src='/bmac.png' alt='Buy me a coffee!'></a></p>
	</section>
	{% endif %}

	{% if post.meta.get('comments', True) %}
	<section class=comments>
		<h2>Comments</h2>
		<div id=disqus_thread></div>
		<button type=button onclick='loadComments(event)'>Load comments</button>
		<noscript><p>Comments require JavaScript to be enabled.</p></noscript>
	</section>
	<script>
	function disqus_config() {
		this.page.url = '{% if post.meta.disqus_url %}{{ post.meta.disqus_url }}{% else %}{{ post.permalink }}{%- endif %}';
	}
	function loadComments(event) {
		event.target.remove();
		document.getElementById('disqus_thread').innerText = 'Loading comments...';
		const s = document.createElement('script');
		s.async = true;
		s.src = '//sharats-me.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		document.body.appendChild(s);
	}
	</script>
	{% endif %}

{% endblock %}
